<!-- key=AIzaSyAgXKvcA_wB6l60kWyuyNWeYTP2zrVr6oo -->

<!DOCTYPE html>
<html>
<head>
  <title></title>


  <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
  <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  
  <script src="{{url_for('static',filename='js/gmaps.js')}}"></script>
  <style type="text/css">
    #map {
      width: 100%;
      height: 400px;
    }
  </style>
</head>
<body>
  <div id="map"></div>
  <script>
    var map = new GMaps({
      el: '#map',
      lat: 31.9333,
      lng: 35.9333,
      disableDefaultUI: true,
      zoom: 5
    });


    {% if auto %}

    GMaps.geolocate({
        success: function(position){
          var x = position.coords.latitude;
          var y = position.coords.longitude;
          map.setCenter(x, y);
        },
        error: function(error){
          alert('Geolocation failed: '+error.message);
        },
        always: function(){
          // pass
        }
      });

    {% endif %}

    {% if city or country %}

    GMaps.geocode({
      {% if city and country %}
      address: '{{city}}, {{country}}',
      {% elif city %}
      address: '{{city}}',
      {% else %} {# country #}
      address: '{{country}}',
      {% endif %}


      callback: function(results, status) {
        if (status == 'OK') {
          var latlng = results[0].geometry.location;
          map.setCenter(latlng.lat(), latlng.lng());
          {% if city %}
          map.setZoom(9);
          {% endif %}
          // map.addMarker({
          //   lat: latlng.lat(),
          //   lng: latlng.lng()
          // });
        }
      }
    });

    {% endif %}



  </script>
</body>
</html>